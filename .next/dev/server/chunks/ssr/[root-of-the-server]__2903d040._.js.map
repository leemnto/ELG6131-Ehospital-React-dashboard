{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mingt/Desktop/e-hos/app/clinical_staff.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/clinical_staff.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/clinical_staff.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA0R,GACvT,wDACA","ignoreList":[0]}},
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mingt/Desktop/e-hos/app/clinical_staff.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/app/clinical_staff.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/app/clinical_staff.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAsQ,GACnS,oCACA","ignoreList":[0]}},
    {"offset": {"line": 42, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mingt/Desktop/e-hos/lib/dashboard-data.ts"],"sourcesContent":["const API_BASE = \"https://aetab8pjmb.us-east-1.awsapprunner.com/table\"\r\n\r\ntype ApiResponse<T> = {\r\n  data?: T[]\r\n}\r\n\r\ntype ClinicRecord = {\r\n  clinic_id: number\r\n  clinic_name: string\r\n  location: string\r\n  active: boolean\r\n}\r\n\r\ntype DoctorRecord = {\r\n  doctor_id: number\r\n  name: string\r\n  clinic_id: number\r\n  specialty?: string | null\r\n}\r\n\r\ntype AppointmentRecord = {\r\n  appointment_id: number\r\n  patient_id: number\r\n  doctor_id: number\r\n  datetime: string | null\r\n  status: string\r\n}\r\n\r\ntype DiagnosisRecord = {\r\n  diagnosis_id: number\r\n  doctor_id: number\r\n  diagnosis_date: string\r\n}\r\n\r\ntype AiDiagnosticRecord = {\r\n  confidence_score: number | null\r\n  created_at: string | null\r\n}\r\n\r\ntype PatientRecord = {\r\n  patient_id: number\r\n  name: string\r\n  dob?: string | null\r\n}\r\n\r\ntype MedicalHistoryRecord = {\r\n  patient_id: number\r\n  condition: string\r\n  status: string\r\n  severity?: string\r\n  followup_required?: boolean\r\n  diagnosis_date?: string\r\n}\r\n\r\ntype VitalRecord = {\r\n  patient_id: number\r\n  blood_pressure: string | null\r\n  heart_rate: number | null\r\n  temperature: number | null\r\n  respiratory_rate: number | null\r\n  recorded_on: string | null\r\n}\r\n\r\ntype PrescriptionRecord = {\r\n  patient_id: number\r\n  doctor_id: number\r\n  medicine_name: string\r\n  dosage: string | null\r\n  start_date: string | null\r\n  end_date: string | null\r\n  status: string\r\n  issued_on: string | null\r\n}\r\n\r\ntype LabTestRecord = {\r\n  patient_id: number\r\n  test_type: string\r\n  status: string\r\n  result: string\r\n  test_date: string\r\n}\r\n\r\ntype ClinicHelpRecord = {\r\n  clinic_id: number\r\n  issue_description: string\r\n  submitted_by: string\r\n}\r\n\r\ntype BloodTestRecord = {\r\n  patient_id: number\r\n  test_name: string\r\n  result_value: string\r\n  test_date: string\r\n}\r\n\r\ntype DoctorTaskRecord = {\r\n  doctor_id: number\r\n  description: string\r\n  status: string\r\n  due_date: string\r\n}\r\n\r\ntype PatientMessageHubRecord = {\r\n  patient_id: number\r\n  summary: string\r\n  last_updated: string\r\n}\r\n\r\nasync function fetchTable<T>(table: string): Promise<T[]> {\r\n  try {\r\n    const res = await fetch(`${API_BASE}/${table}`, { cache: \"no-store\" })\r\n    if (!res.ok) {\r\n      throw new Error(`Failed to fetch ${table}`)\r\n    }\r\n    const body = (await res.json()) as ApiResponse<T>\r\n    return Array.isArray(body?.data) ? body.data : []\r\n  } catch (error) {\r\n    console.error(`[fetchTable] ${table}`, error)\r\n    return []\r\n  }\r\n}\r\n\r\nconst formatShortDate = (value: Date) =>\r\n  Intl.DateTimeFormat(\"en-US\", { month: \"short\", day: \"numeric\" }).format(value)\r\n\r\nconst formatDateTime = (value: Date) =>\r\n  Intl.DateTimeFormat(\"en-US\", {\r\n    month: \"short\",\r\n    day: \"numeric\",\r\n    hour: \"numeric\",\r\n    minute: \"2-digit\",\r\n  }).format(value)\r\n\r\nconst toDate = (value: string | null | undefined): Date | null => {\r\n  if (!value) return null\r\n  const parsed = new Date(value)\r\n  return Number.isNaN(parsed.getTime()) ? null : parsed\r\n}\r\n\r\nconst ensureTrend = <T extends { date: string }>(\r\n  points: T[],\r\n  fallbackFactory: () => T[],\r\n) => (points.length ? points : fallbackFactory())\r\n\r\nexport type HospitalOption = {\r\n  id: number\r\n  name: string\r\n  city: string\r\n}\r\n\r\ntype TrendPoint<Key extends string> = {\r\n  date: string\r\n} & Record<Key, number>\r\n\r\nexport type AnalystKPIs = {\r\n  diagnosisVolume: TrendPoint<\"volume\">[]\r\n  appointmentVolume: TrendPoint<\"appointments\">[]\r\n  aiAccuracy: TrendPoint<\"accuracy\">[]\r\n  retention: TrendPoint<\"retention\">[]\r\n}\r\n\r\nexport type AnalystSummary = {\r\n  aiAccuracy: number\r\n  retention: number\r\n  diagnosesTotal: number\r\n  appointmentsTotal: number\r\n}\r\n\r\nexport type AnalystDashboardData = {\r\n  hospitals: HospitalOption[]\r\n  kpiMetrics: AnalystKPIs\r\n  summary: AnalystSummary\r\n}\r\n\r\nexport async function getAnalystDashboardData(): Promise<AnalystDashboardData> {\r\n  const [clinics, diagnoses, appointments, aiDiagnostics] = await Promise.all([\r\n    fetchTable<ClinicRecord>(\"clinic_servicehistory\"),\r\n    fetchTable<DiagnosisRecord>(\"diagnosis\"),\r\n    fetchTable<AppointmentRecord>(\"appointments\"),\r\n    fetchTable<AiDiagnosticRecord>(\"ai_diagnostics\"),\r\n  ])\r\n\r\n  const hospitals: HospitalOption[] = (clinics.length ? clinics : []).map((clinic) => ({\r\n    id: clinic.clinic_id,\r\n    name: clinic.clinic_name ?? `Clinic ${clinic.clinic_id}`,\r\n    city: clinic.location ?? \"Unknown\",\r\n  }))\r\n\r\n  const MAX_POINTS = 180\r\n\r\n  const dailyCount = <Key extends string>(\r\n    records: { date: string | null }[],\r\n    valueKey: Key,\r\n  ): TrendPoint<Key>[] => {\r\n    const map = new Map<string, number>()\r\n    records.forEach((record) => {\r\n      const date = toDate(record.date)\r\n      if (!date) return\r\n      const label = formatShortDate(date)\r\n      map.set(label, (map.get(label) ?? 0) + 1)\r\n    })\r\n    const sorted = Array.from(map.entries()).sort((a, b) => new Date(a[0]).getTime() - new Date(b[0]).getTime())\r\n    const limited = sorted.slice(-MAX_POINTS)\r\n    return limited.map(([date, value]) => ({ date, [valueKey]: value }) as TrendPoint<Key>)\r\n  }\r\n\r\n  const diagnosisVolume = dailyCount(\r\n    diagnoses.map((d) => ({ date: d.diagnosis_date })),\r\n    \"volume\",\r\n  )\r\n\r\n  const appointmentVolume = dailyCount(\r\n    appointments\r\n      .filter((apt) => apt.datetime)\r\n      .map((apt) => ({ date: apt.datetime! })),\r\n    \"appointments\",\r\n  )\r\n\r\n  const aiAccuracy = (() => {\r\n    const map = new Map<string, { sum: number; count: number }>()\r\n    aiDiagnostics.forEach((record) => {\r\n      if (record.confidence_score == null || !record.created_at) return\r\n      const label = formatShortDate(new Date(record.created_at))\r\n      const entry = map.get(label) ?? { sum: 0, count: 0 }\r\n      entry.sum += record.confidence_score * 100\r\n      entry.count += 1\r\n      map.set(label, entry)\r\n    })\r\n    const sorted = Array.from(map.entries()).sort((a, b) => new Date(a[0]).getTime() - new Date(b[0]).getTime())\r\n    const limited = sorted.slice(-MAX_POINTS)\r\n    return limited\r\n      .map(\r\n        ([date, { sum, count }]) =>\r\n          ({\r\n            date,\r\n            accuracy: count ? Number((sum / count).toFixed(1)) : 0,\r\n          }) satisfies TrendPoint<\"accuracy\">,\r\n      )\r\n  })()\r\n\r\n  const retention = (() => {\r\n    const map = new Map<string, { total: number; completed: number }>()\r\n    appointments.forEach((apt) => {\r\n      if (!apt.datetime) return\r\n      const label = formatShortDate(new Date(apt.datetime))\r\n      const entry = map.get(label) ?? { total: 0, completed: 0 }\r\n      entry.total += 1\r\n      if (apt.status?.toLowerCase() === \"completed\") {\r\n        entry.completed += 1\r\n      }\r\n      map.set(label, entry)\r\n    })\r\n    const sorted = Array.from(map.entries()).sort((a, b) => new Date(a[0]).getTime() - new Date(b[0]).getTime())\r\n    const limited = sorted.slice(-MAX_POINTS)\r\n    return limited\r\n      .map(([date, { total, completed }]) => {\r\n        const percent = total ? Number(((completed / total) * 100).toFixed(1)) : 0\r\n        return { date, retention: percent } satisfies TrendPoint<\"retention\">\r\n      })\r\n  })()\r\n\r\n  const fallbackTrend = <Key extends string>(key: Key): TrendPoint<Key>[] =>\r\n    ([\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"] as const).map(\r\n      (day) =>\r\n        ({\r\n          date: day,\r\n          [key]: 1,\r\n        }) as TrendPoint<Key>,\r\n    )\r\n\r\n  const accuracyFallback = () =>\r\n    fallbackTrend(\"accuracy\").map(\r\n      (point) =>\r\n        ({\r\n          ...point,\r\n          accuracy: 90 + point.accuracy,\r\n        }) as TrendPoint<\"accuracy\">,\r\n    )\r\n\r\n  const retentionFallback = () =>\r\n    fallbackTrend(\"retention\").map(\r\n      (point) =>\r\n        ({\r\n          ...point,\r\n          retention: 85 + point.retention,\r\n        }) as TrendPoint<\"retention\">,\r\n    )\r\n\r\n  const kpiMetrics: AnalystKPIs = {\r\n    diagnosisVolume: ensureTrend(diagnosisVolume, () => fallbackTrend(\"volume\")),\r\n    appointmentVolume: ensureTrend(appointmentVolume, () => fallbackTrend(\"appointments\")),\r\n    aiAccuracy: ensureTrend(aiAccuracy, accuracyFallback),\r\n    retention: ensureTrend(retention, retentionFallback),\r\n  }\r\n\r\n  const summary: AnalystSummary = {\r\n    aiAccuracy: kpiMetrics.aiAccuracy.at(-1)?.accuracy ?? 0,\r\n    retention: kpiMetrics.retention.at(-1)?.retention ?? 0,\r\n    diagnosesTotal: kpiMetrics.diagnosisVolume.reduce((sum, point) => sum + point.volume, 0),\r\n    appointmentsTotal: kpiMetrics.appointmentVolume.reduce((sum, point) => sum + point.appointments, 0),\r\n  }\r\n\r\n  return {\r\n    hospitals: hospitals.length ? hospitals : [{ id: 0, name: \"Network Wide\", city: \"Canada\" }],\r\n    kpiMetrics,\r\n    summary,\r\n  }\r\n}\r\n\r\nexport type DepartmentInfo = {\r\n  id: number\r\n  name: string\r\n  hospital: string\r\n  staffCount: number\r\n}\r\n\r\nexport type DepartmentPatient = {\r\n  id: number\r\n  name: string\r\n  admitted: string\r\n  condition: string\r\n  status: \"Stable\" | \"Recovery\" | \"Monitoring\"\r\n}\r\n\r\nexport type AppointmentCard = {\r\n  patientName: string\r\n  type: string\r\n  date: string\r\n  room: string\r\n}\r\n\r\nexport type FollowUpCard = {\r\n  patientName: string\r\n  followUp: string\r\n  reason: string\r\n}\r\n\r\nexport type AlertCard = {\r\n  patientName: string\r\n  alert: string\r\n  severity: \"critical\" | \"warning\" | \"info\"\r\n  time: string\r\n}\r\n\r\nexport type MetricBlock = {\r\n  metric: string\r\n  value: string\r\n  status: \"Normal\" | \"Review\"\r\n}\r\n\r\nexport type ClinicalStaffDashboardData = {\r\n  departments: DepartmentInfo[]\r\n  patientsByDepartment: Record<number, DepartmentPatient[]>\r\n  appointmentsByDepartment: Record<number, AppointmentCard[]>\r\n  followUpsByDepartment: Record<number, FollowUpCard[]>\r\n  alertsByDepartment: Record<number, AlertCard[]>\r\n  metricsByPatient: Record<number, MetricBlock[]>\r\n}\r\n\r\nconst statusLabel = (value: string): DepartmentPatient[\"status\"] => {\r\n  const normalized = value.toLowerCase()\r\n  if (normalized.includes(\"resolve\")) return \"Stable\"\r\n  if (normalized.includes(\"chronic\")) return \"Recovery\"\r\n  return \"Monitoring\"\r\n}\r\n\r\nconst metricStatus = (label: string, value: number): MetricBlock[\"status\"] => {\r\n  if (label === \"Heart Rate\") {\r\n    return value >= 60 && value <= 100 ? \"Normal\" : \"Review\"\r\n  }\r\n  if (label === \"Temperature\") {\r\n    return value >= 36 && value <= 37.5 ? \"Normal\" : \"Review\"\r\n  }\r\n  return \"Normal\"\r\n}\r\n\r\nexport async function getClinicalStaffDashboardData(): Promise<ClinicalStaffDashboardData> {\r\n  const [\r\n    clinics,\r\n    staff,\r\n    doctors,\r\n    appointments,\r\n    patients,\r\n    history,\r\n    vitals,\r\n    helpTickets,\r\n  ] = await Promise.all([\r\n    fetchTable<ClinicRecord>(\"clinic_servicehistory\"),\r\n    fetchTable<{ clinic_id: number }>(\"clinical_staff_registration\"),\r\n    fetchTable<DoctorRecord>(\"doctors_registration\"),\r\n    fetchTable<AppointmentRecord>(\"appointments\"),\r\n    fetchTable<PatientRecord>(\"patients_registration\"),\r\n    fetchTable<MedicalHistoryRecord>(\"medical_history\"),\r\n    fetchTable<VitalRecord>(\"vitals_history\"),\r\n    fetchTable<ClinicHelpRecord>(\"clinic_help\"),\r\n  ])\r\n\r\n  const staffCounts = staff.reduce<Record<number, number>>((acc, entry) => {\r\n    if (!entry.clinic_id) return acc\r\n    acc[entry.clinic_id] = (acc[entry.clinic_id] ?? 0) + 1\r\n    return acc\r\n  }, {})\r\n\r\n  const activeClinics = clinics.filter((clinic) => clinic.active)\r\n  const departments = (activeClinics.length ? activeClinics : clinics).slice(0, 3).map((clinic) => ({\r\n    id: clinic.clinic_id,\r\n    name: clinic.clinic_name ?? `Clinic ${clinic.clinic_id}`,\r\n    hospital: clinic.location ?? \"Regional\",\r\n    staffCount: staffCounts[clinic.clinic_id] ?? 0,\r\n  }))\r\n\r\n  const doctorClinicMap = doctors.reduce<Record<number, number>>((acc, doctor) => {\r\n    if (doctor.doctor_id && doctor.clinic_id) {\r\n      acc[doctor.doctor_id] = doctor.clinic_id\r\n    }\r\n    return acc\r\n  }, {})\r\n\r\n  const patientMap = patients.reduce<Record<number, PatientRecord>>((acc, patient) => {\r\n    acc[patient.patient_id] = patient\r\n    return acc\r\n  }, {})\r\n\r\n  const historyMap = history.reduce<Record<number, MedicalHistoryRecord>>((acc, entry) => {\r\n    acc[entry.patient_id] = entry\r\n    return acc\r\n  }, {})\r\n\r\n  const patientsByDepartment: Record<number, DepartmentPatient[]> = {}\r\n  const appointmentsByDepartment: Record<number, AppointmentCard[]> = {}\r\n  const followUpsByDepartment: Record<number, FollowUpCard[]> = {}\r\n  const alertsByDepartment: Record<number, AlertCard[]> = {}\r\n  const metricsByPatient: Record<number, MetricBlock[]> = {}\r\n\r\n  const vitalsByPatient = vitals.reduce<Record<number, VitalRecord[]>>((acc, entry) => {\r\n    if (!entry.patient_id) return acc\r\n    acc[entry.patient_id] = acc[entry.patient_id] ?? []\r\n    acc[entry.patient_id].push(entry)\r\n    return acc\r\n  }, {})\r\n\r\n  departments.forEach((dept) => {\r\n    patientsByDepartment[dept.id] = []\r\n    appointmentsByDepartment[dept.id] = []\r\n    followUpsByDepartment[dept.id] = []\r\n    alertsByDepartment[dept.id] = []\r\n  })\r\n\r\n  const deptRoom = (clinicId: number) => {\r\n    const clinic = clinics.find((c) => c.clinic_id === clinicId)\r\n    return clinic ? `${clinic.clinic_name} Wing` : \"Care Suite\"\r\n  }\r\n\r\n  appointments.forEach((appointment) => {\r\n    const clinicId = doctorClinicMap[appointment.doctor_id]\r\n    if (!clinicId || !patientsByDepartment[clinicId]) return\r\n    const details = patientMap[appointment.patient_id]\r\n    if (!details) return\r\n\r\n    const patientList = patientsByDepartment[clinicId]\r\n    if (!patientList.find((p) => p.id === appointment.patient_id)) {\r\n      const medical = historyMap[appointment.patient_id]\r\n      patientList.push({\r\n        id: appointment.patient_id,\r\n        name: details.name,\r\n        admitted: formatShortDate(toDate(appointment.datetime) ?? new Date()),\r\n        condition: medical?.condition ?? \"General Care\",\r\n        status: medical ? statusLabel(medical.status) : \"Monitoring\",\r\n      })\r\n    }\r\n\r\n    const isFuture = (() => {\r\n      const date = toDate(appointment.datetime)\r\n      return date ? date.getTime() >= Date.now() : false\r\n    })()\r\n\r\n    if (isFuture && appointmentsByDepartment[clinicId].length < 3) {\r\n      appointmentsByDepartment[clinicId].push({\r\n        patientName: details.name,\r\n        type: appointment.status,\r\n        date: formatDateTime(toDate(appointment.datetime) ?? new Date()),\r\n        room: deptRoom(clinicId),\r\n      })\r\n    }\r\n  })\r\n\r\n  departments.forEach((dept) => {\r\n    const followUps = history.filter(\r\n      (record) =>\r\n        record.followup_required &&\r\n        patientsByDepartment[dept.id].some((patient) => patient.id === record.patient_id),\r\n    )\r\n\r\n    followUpsByDepartment[dept.id] = followUps.slice(0, 3).map((record) => ({\r\n      patientName: patientMap[record.patient_id]?.name ?? `Patient ${record.patient_id}`,\r\n      followUp: record.diagnosis_date ? formatShortDate(new Date(record.diagnosis_date)) : \"Pending\",\r\n      reason: `${record.condition} • ${record.severity ?? \"Review\"}`,\r\n    }))\r\n\r\n    const deptTickets = helpTickets.filter((ticket) => ticket.clinic_id === dept.id).slice(0, 3)\r\n    alertsByDepartment[dept.id] = (deptTickets.length ? deptTickets : helpTickets.slice(0, 3)).map(\r\n      (ticket, index) => ({\r\n        patientName: ticket.submitted_by,\r\n        alert: ticket.issue_description,\r\n        severity: ticket.issue_description.toLowerCase().includes(\"emergency\")\r\n          ? \"critical\"\r\n          : index === 0\r\n            ? \"warning\"\r\n            : \"info\",\r\n        time: `${15 * (index + 1)} min ago`,\r\n      }),\r\n    )\r\n  })\r\n\r\n  Object.entries(vitalsByPatient).forEach(([patientId, records]) => {\r\n    const latest = records.sort(\r\n      (a, b) => (toDate(b.recorded_on)?.getTime() ?? 0) - (toDate(a.recorded_on)?.getTime() ?? 0),\r\n    )[0]\r\n    if (!latest) return\r\n\r\n    const metrics: MetricBlock[] = []\r\n    if (latest.blood_pressure) {\r\n      metrics.push({\r\n        metric: \"Blood Pressure\",\r\n        value: latest.blood_pressure,\r\n        status: \"Normal\",\r\n      })\r\n    }\r\n    if (typeof latest.heart_rate === \"number\") {\r\n      metrics.push({\r\n        metric: \"Heart Rate\",\r\n        value: `${latest.heart_rate} bpm`,\r\n        status: metricStatus(\"Heart Rate\", latest.heart_rate),\r\n      })\r\n    }\r\n    if (typeof latest.temperature === \"number\") {\r\n      metrics.push({\r\n        metric: \"Temperature\",\r\n        value: `${latest.temperature.toFixed(1)}°C`,\r\n        status: metricStatus(\"Temperature\", latest.temperature),\r\n      })\r\n    }\r\n    if (typeof latest.respiratory_rate === \"number\") {\r\n      metrics.push({\r\n        metric: \"Respiratory Rate\",\r\n        value: `${latest.respiratory_rate} rpm`,\r\n        status: \"Normal\",\r\n      })\r\n    }\r\n\r\n    metricsByPatient[Number(patientId)] = metrics.length\r\n      ? metrics\r\n      : [\r\n          {\r\n            metric: \"No vitals available\",\r\n            value: \"Awaiting data\",\r\n            status: \"Review\",\r\n          },\r\n        ]\r\n  })\r\n\r\n  return {\r\n    departments,\r\n    patientsByDepartment,\r\n    appointmentsByDepartment,\r\n    followUpsByDepartment,\r\n    alertsByDepartment,\r\n    metricsByPatient,\r\n  }\r\n}\r\n\r\nexport type DoctorPatientCard = {\r\n  id: number\r\n  name: string\r\n  age: number\r\n  lastVisit: string\r\n}\r\n\r\nexport type VitalTrendPoint = {\r\n  date: string\r\n  systolic: number\r\n  diastolic: number\r\n  heartRate: number\r\n}\r\n\r\nexport type DoctorPrescriptionCard = {\r\n  drug: string\r\n  dose: string\r\n  frequency: string\r\n  since: string\r\n}\r\n\r\nexport type DoctorAppointmentCard = {\r\n  patientName: string\r\n  date: string\r\n  type: string\r\n}\r\n\r\nexport type DoctorAlert = {\r\n  message: string\r\n  tone: \"warning\" | \"info\"\r\n}\r\n\r\nexport type DoctorDashboardData = {\r\n  doctorName: string\r\n  patients: DoctorPatientCard[]\r\n  vitalsByPatient: Record<number, VitalTrendPoint[]>\r\n  currentPrescriptions: DoctorPrescriptionCard[]\r\n  previousPrescriptions: DoctorPrescriptionCard[]\r\n  upcomingAppointments: DoctorAppointmentCard[]\r\n  alerts: DoctorAlert[]\r\n}\r\n\r\nconst parseBloodPressure = (value: string | null) => {\r\n  if (!value) return null\r\n  const [systolic, diastolic] = value.split(\"/\").map((part) => Number(part))\r\n  if (Number.isNaN(systolic) || Number.isNaN(diastolic)) return null\r\n  return { systolic, diastolic }\r\n}\r\n\r\nconst calculateAge = (dob?: string | null) => {\r\n  if (!dob) return 0\r\n  const birth = new Date(dob)\r\n  if (Number.isNaN(birth.getTime())) return 0\r\n  const diff = Date.now() - birth.getTime()\r\n  return Math.max(0, Math.floor(diff / (365.25 * 24 * 60 * 60 * 1000)))\r\n}\r\n\r\nexport async function getDoctorDashboardData(doctorId = 1): Promise<DoctorDashboardData> {\r\n  const [doctors, appointments, patients, vitals, prescriptions, tasks] = await Promise.all([\r\n    fetchTable<DoctorRecord>(\"doctors_registration\"),\r\n    fetchTable<AppointmentRecord>(\"appointments\"),\r\n    fetchTable<PatientRecord>(\"patients_registration\"),\r\n    fetchTable<VitalRecord>(\"vitals_history\"),\r\n    fetchTable<PrescriptionRecord>(\"prescription\"),\r\n    fetchTable<DoctorTaskRecord>(\"doctor_tasks\"),\r\n  ])\r\n\r\n  const doctor = doctors.find((entry) => entry.doctor_id === doctorId)\r\n  const doctorAppointments = appointments.filter((apt) => apt.doctor_id === doctorId)\r\n\r\n  const patientMap = patients.reduce<Record<number, PatientRecord>>((acc, patient) => {\r\n    acc[patient.patient_id] = patient\r\n    return acc\r\n  }, {})\r\n\r\n  const patientsCards: DoctorPatientCard[] = []\r\n  const patientIds = new Set<number>()\r\n  doctorAppointments.forEach((apt) => {\r\n    if (patientIds.has(apt.patient_id)) return\r\n    patientIds.add(apt.patient_id)\r\n    const patient = patientMap[apt.patient_id]\r\n    if (!patient) return\r\n    const lastVisitDate =\r\n      doctorAppointments\r\n        .filter((entry) => entry.patient_id === apt.patient_id)\r\n        .map((entry) => toDate(entry.datetime)?.getTime() ?? 0)\r\n        .sort((a, b) => b - a)[0] ?? Date.now()\r\n    patientsCards.push({\r\n      id: patient.patient_id,\r\n      name: patient.name,\r\n      age: calculateAge(patient.dob),\r\n      lastVisit: formatShortDate(new Date(lastVisitDate)),\r\n    })\r\n  })\r\n\r\n  const vitalsByPatient = doctorAppointments.reduce<Record<number, VitalTrendPoint[]>>((acc, apt) => {\r\n    const patientVitals = vitals\r\n      .filter((record) => record.patient_id === apt.patient_id && record.blood_pressure)\r\n      .sort(\r\n        (a, b) => (toDate(a.recorded_on)?.getTime() ?? 0) - (toDate(b.recorded_on)?.getTime() ?? 0),\r\n      )\r\n      .slice(-7)\r\n      .map((record) => {\r\n        const bp = parseBloodPressure(record.blood_pressure)\r\n        return {\r\n          date: formatShortDate(toDate(record.recorded_on) ?? new Date()),\r\n          systolic: bp?.systolic ?? 0,\r\n          diastolic: bp?.diastolic ?? 0,\r\n          heartRate: record.heart_rate ?? 0,\r\n        }\r\n      })\r\n    if (patientVitals.length) {\r\n      acc[apt.patient_id] = patientVitals\r\n    }\r\n    return acc\r\n  }, {})\r\n\r\n  const currentPrescriptions = prescriptions\r\n    .filter((rx) => rx.doctor_id === doctorId && rx.status?.toLowerCase() === \"active\")\r\n    .map((rx) => ({\r\n      drug: rx.medicine_name,\r\n      dose: rx.dosage ?? \"As directed\",\r\n      frequency: rx.dosage ?? \"Per instructions\",\r\n      since: rx.start_date ? formatShortDate(new Date(rx.start_date)) : \"Ongoing\",\r\n    }))\r\n\r\n  const previousPrescriptions = prescriptions\r\n    .filter((rx) => rx.doctor_id === doctorId && rx.status?.toLowerCase() !== \"active\")\r\n    .map((rx) => ({\r\n      drug: rx.medicine_name,\r\n      dose: rx.dosage ?? \"As directed\",\r\n      frequency: rx.dosage ?? \"Per instructions\",\r\n      since: rx.end_date ? formatShortDate(new Date(rx.end_date)) : \"Completed\",\r\n    }))\r\n\r\n  const upcomingAppointments = doctorAppointments\r\n    .filter((apt) => {\r\n      const date = toDate(apt.datetime)\r\n      return date ? date.getTime() >= Date.now() && apt.status?.toLowerCase() === \"scheduled\" : false\r\n    })\r\n    .slice(0, 3)\r\n    .map((apt) => ({\r\n      patientName: patientMap[apt.patient_id]?.name ?? `Patient ${apt.patient_id}`,\r\n      date: formatDateTime(toDate(apt.datetime) ?? new Date()),\r\n      type: apt.status,\r\n    }))\r\n\r\n  const doctorAlerts: DoctorAlert[] = tasks\r\n    .filter((task) => task.doctor_id === doctorId)\r\n    .slice(0, 2)\r\n    .map((task) => ({\r\n      message: task.description,\r\n      tone: task.status.toLowerCase() === \"in progress\" ? \"warning\" : \"info\",\r\n    }))\r\n\r\n  return {\r\n    doctorName: doctor?.name ?? `Doctor ${doctorId}`,\r\n    patients: patientsCards.slice(0, 3),\r\n    vitalsByPatient,\r\n    currentPrescriptions,\r\n    previousPrescriptions,\r\n    upcomingAppointments,\r\n    alerts: doctorAlerts.length\r\n      ? doctorAlerts\r\n      : [\r\n          { message: \"No outstanding physician tasks\", tone: \"info\" },\r\n          { message: \"All lab reviews completed\", tone: \"warning\" },\r\n        ],\r\n  }\r\n}\r\n\r\nexport type PatientAppointmentCard = {\r\n  doctor: string\r\n  date: string\r\n  location: string\r\n}\r\n\r\nexport type PatientHealthPoint = {\r\n  date: string\r\n  bloodPressure: number\r\n  heartRate: number\r\n  glucose: number\r\n}\r\n\r\nexport type PatientMedication = {\r\n  name: string\r\n  dosage: string\r\n}\r\n\r\nexport type PatientRecordEntry = {\r\n  type: string\r\n  description: string\r\n  date: string\r\n  status: string\r\n  statusTone: \"success\" | \"warning\"\r\n}\r\n\r\nexport type PatientTask = {\r\n  title: string\r\n  createdDate: string\r\n}\r\n\r\nexport type PatientDashboardData = {\r\n  patientName: string\r\n  appointments: PatientAppointmentCard[]\r\n  healthMetrics: PatientHealthPoint[]\r\n  medications: PatientMedication[]\r\n  medicalRecords: PatientRecordEntry[]\r\n  tasks: PatientTask[]\r\n}\r\n\r\nexport async function getPatientDashboardData(patientId = 1): Promise<PatientDashboardData> {\r\n  const [\r\n    patients,\r\n    appointments,\r\n    doctors,\r\n    clinics,\r\n    vitals,\r\n    bloodTests,\r\n    prescriptions,\r\n    labTests,\r\n    messageHubs,\r\n  ] = await Promise.all([\r\n    fetchTable<PatientRecord>(\"patients_registration\"),\r\n    fetchTable<AppointmentRecord>(\"appointments\"),\r\n    fetchTable<DoctorRecord>(\"doctors_registration\"),\r\n    fetchTable<ClinicRecord>(\"clinic_servicehistory\"),\r\n    fetchTable<VitalRecord>(\"vitals_history\"),\r\n    fetchTable<BloodTestRecord>(\"bloodtests\"),\r\n    fetchTable<PrescriptionRecord>(\"prescription\"),\r\n    fetchTable<LabTestRecord>(\"lab_tests\"),\r\n    fetchTable<PatientMessageHubRecord>(\"patient_message_hub\"),\r\n  ])\r\n\r\n  const patient = patients.find((entry) => entry.patient_id === patientId)\r\n  const doctorMap = doctors.reduce<Record<number, DoctorRecord>>((acc, doc) => {\r\n    acc[doc.doctor_id] = doc\r\n    return acc\r\n  }, {})\r\n  const clinicMap = clinics.reduce<Record<number, ClinicRecord>>((acc, clinic) => {\r\n    acc[clinic.clinic_id] = clinic\r\n    return acc\r\n  }, {})\r\n\r\n  const patientAppointments = appointments\r\n    .filter((apt) => apt.patient_id === patientId && apt.datetime)\r\n    .slice(0, 3)\r\n    .map((apt) => {\r\n      const doctor = doctorMap[apt.doctor_id]\r\n      const location = clinicMap[doctor?.clinic_id ?? 0]?.clinic_name ?? \"Virtual Visit\"\r\n      return {\r\n        doctor: doctor?.name ?? `Doctor ${apt.doctor_id}`,\r\n        date: formatDateTime(toDate(apt.datetime) ?? new Date()),\r\n        location,\r\n      }\r\n    })\r\n\r\n  const patientVitals = vitals\r\n    .filter((record) => record.patient_id === patientId)\r\n    .sort(\r\n      (a, b) => (toDate(a.recorded_on)?.getTime() ?? 0) - (toDate(b.recorded_on)?.getTime() ?? 0),\r\n    )\r\n    .slice(-7)\r\n\r\n  const patientGlucose = bloodTests\r\n    .filter((record) => record.patient_id === patientId && record.test_name.toLowerCase().includes(\"glucose\"))\r\n    .sort((a, b) => new Date(a.test_date).getTime() - new Date(b.test_date).getTime())\r\n    .slice(-7)\r\n\r\n  const healthMetrics: PatientHealthPoint[] =\r\n    patientVitals.length > 0\r\n      ? patientVitals.map((record, index) => {\r\n          const bp = parseBloodPressure(record.blood_pressure)\r\n          const glucose = patientGlucose[index]?.result_value\r\n          return {\r\n            date: formatShortDate(toDate(record.recorded_on) ?? new Date()),\r\n            bloodPressure: bp?.systolic ?? 0,\r\n            heartRate: record.heart_rate ?? 0,\r\n            glucose: glucose ? Number(glucose) : 0,\r\n          }\r\n        })\r\n      : [\r\n          // Minimal mock data when vitals are unavailable to keep the chart visible.\r\n          { date: \"Mon\", bloodPressure: 120, heartRate: 72, glucose: 95 },\r\n          { date: \"Tue\", bloodPressure: 118, heartRate: 70, glucose: 96 },\r\n          { date: \"Wed\", bloodPressure: 122, heartRate: 74, glucose: 98 },\r\n          { date: \"Thu\", bloodPressure: 119, heartRate: 71, glucose: 97 },\r\n          { date: \"Fri\", bloodPressure: 121, heartRate: 73, glucose: 99 },\r\n          { date: \"Sat\", bloodPressure: 117, heartRate: 69, glucose: 94 },\r\n          { date: \"Sun\", bloodPressure: 120, heartRate: 72, glucose: 95 },\r\n        ]\r\n\r\n  const medications = prescriptions\r\n    .filter((rx) => rx.patient_id === patientId && rx.status?.toLowerCase() === \"active\")\r\n    .map((rx) => ({\r\n      name: rx.medicine_name,\r\n      dosage: rx.dosage ?? \"Per instructions\",\r\n    }))\r\n\r\n  const medicalRecords = labTests\r\n    .filter((record) => record.patient_id === patientId)\r\n    .slice(0, 3)\r\n    .map((record) => ({\r\n      type: record.test_type,\r\n      description: `${record.test_type} • ${record.result}`,\r\n      date: formatShortDate(new Date(record.test_date)),\r\n      status: record.status,\r\n      statusTone: record.status.toLowerCase() === \"completed\" ? (\"success\" as const) : (\"warning\" as const),\r\n    }))\r\n\r\n  const tasks = messageHubs\r\n    .filter((hub) => hub.patient_id === patientId)\r\n    .slice(0, 2)\r\n    .map((hub) => ({\r\n      title: hub.summary,\r\n      createdDate: formatDateTime(new Date(hub.last_updated)),\r\n    }))\r\n\r\n  return {\r\n    patientName: patient?.name ?? `Patient ${patientId}`,\r\n    appointments: patientAppointments,\r\n    healthMetrics,\r\n    medications: medications.length\r\n      ? medications\r\n      : [{ name: \"Medication list empty\", dosage: \"Awaiting prescriptions\" }],\r\n    medicalRecords,\r\n    tasks: tasks.length\r\n      ? tasks\r\n      : [\r\n          {\r\n            title: \"No pending tasks\",\r\n            createdDate: formatDateTime(new Date()),\r\n          },\r\n        ],\r\n  }\r\n}\r\n\r\n\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 609, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/mingt/Desktop/e-hos/app/%28routes%29/clinical_staff/page.tsx"],"sourcesContent":["import ClinicalStaffPage from \"@/app/clinical_staff\"\r\nimport { getClinicalStaffDashboardData } from \"@/lib/dashboard-data\"\r\n\r\nexport const dynamic = \"force-dynamic\"\r\n\r\nexport default async function ClinicalStaffRoute() {\r\n  const data = await getClinicalStaffDashboardData()\r\n  return <ClinicalStaffPage {...data} />\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;AAEO,MAAM,UAAU;AAER,eAAe;IAC5B,MAAM,OAAO,MAAM,IAAA,yJAA6B;IAChD,qBAAO,8OAAC,iIAAiB;QAAE,GAAG,IAAI;;;;;;AACpC"}}]
}