module.exports=[70864,a=>{a.n(a.i(33290))},43619,a=>{a.n(a.i(79962))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},50121,a=>{"use strict";async function b(a){try{let b=await fetch(`https://aetab8pjmb.us-east-1.awsapprunner.com/table/${a}`,{cache:"no-store"});if(!b.ok)throw Error(`Failed to fetch ${a}`);let c=await b.json();return Array.isArray(c?.data)?c.data:[]}catch(b){return console.error(`[fetchTable] ${a}`,b),[]}}let c=a=>Intl.DateTimeFormat("en-US",{month:"short",day:"numeric"}).format(a),d=a=>Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}).format(a),e=a=>{if(!a)return null;let b=new Date(a);return Number.isNaN(b.getTime())?null:b},f=(a,b)=>a.length?a:b();async function g(){let a,d,[g,h,i,j]=await Promise.all([b("clinic_servicehistory"),b("diagnosis"),b("appointments"),b("ai_diagnostics")]),k=(g.length?g:[]).map(a=>({id:a.clinic_id,name:a.clinic_name??`Clinic ${a.clinic_id}`,city:a.location??"Unknown"})),l=(a,b)=>{let d=new Map;return a.forEach(a=>{let b=e(a.date);if(!b)return;let f=c(b);d.set(f,(d.get(f)??0)+1)}),Array.from(d.entries()).sort((a,b)=>new Date(a[0]).getTime()-new Date(b[0]).getTime()).slice(-180).map(([a,c])=>({date:a,[b]:c}))},m=l(h.map(a=>({date:a.diagnosis_date})),"volume"),n=l(i.filter(a=>a.datetime).map(a=>({date:a.datetime})),"appointments"),o=(a=new Map,j.forEach(b=>{if(null==b.confidence_score||!b.created_at)return;let d=c(new Date(b.created_at)),e=a.get(d)??{sum:0,count:0};e.sum+=100*b.confidence_score,e.count+=1,a.set(d,e)}),Array.from(a.entries()).sort((a,b)=>new Date(a[0]).getTime()-new Date(b[0]).getTime()).slice(-180).map(([a,{sum:b,count:c}])=>({date:a,accuracy:c?Number((b/c).toFixed(1)):0}))),p=(d=new Map,i.forEach(a=>{if(!a.datetime)return;let b=c(new Date(a.datetime)),e=d.get(b)??{total:0,completed:0};e.total+=1,a.status?.toLowerCase()==="completed"&&(e.completed+=1),d.set(b,e)}),Array.from(d.entries()).sort((a,b)=>new Date(a[0]).getTime()-new Date(b[0]).getTime()).slice(-180).map(([a,{total:b,completed:c}])=>({date:a,retention:b?Number((c/b*100).toFixed(1)):0}))),q=a=>["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map(b=>({date:b,[a]:1})),r={diagnosisVolume:f(m,()=>q("volume")),appointmentVolume:f(n,()=>q("appointments")),aiAccuracy:f(o,()=>q("accuracy").map(a=>({...a,accuracy:90+a.accuracy}))),retention:f(p,()=>q("retention").map(a=>({...a,retention:85+a.retention})))},s={aiAccuracy:r.aiAccuracy.at(-1)?.accuracy??0,retention:r.retention.at(-1)?.retention??0,diagnosesTotal:r.diagnosisVolume.reduce((a,b)=>a+b.volume,0),appointmentsTotal:r.appointmentVolume.reduce((a,b)=>a+b.appointments,0)};return{hospitals:k.length?k:[{id:0,name:"Network Wide",city:"Canada"}],kpiMetrics:r,summary:s}}let h=(a,b)=>"Heart Rate"===a?b>=60&&b<=100?"Normal":"Review":"Temperature"===a?b>=36&&b<=37.5?"Normal":"Review":"Normal";async function i(){let[a,f,g,i,j,k,l,m]=await Promise.all([b("clinic_servicehistory"),b("clinical_staff_registration"),b("doctors_registration"),b("appointments"),b("patients_registration"),b("medical_history"),b("vitals_history"),b("clinic_help")]),n=f.reduce((a,b)=>(b.clinic_id&&(a[b.clinic_id]=(a[b.clinic_id]??0)+1),a),{}),o=a.filter(a=>a.active),p=(o.length?o:a).slice(0,3).map(a=>({id:a.clinic_id,name:a.clinic_name??`Clinic ${a.clinic_id}`,hospital:a.location??"Regional",staffCount:n[a.clinic_id]??0})),q=g.reduce((a,b)=>(b.doctor_id&&b.clinic_id&&(a[b.doctor_id]=b.clinic_id),a),{}),r=j.reduce((a,b)=>(a[b.patient_id]=b,a),{}),s=k.reduce((a,b)=>(a[b.patient_id]=b,a),{}),t={},u={},v={},w={},x={},y=l.reduce((a,b)=>(b.patient_id&&(a[b.patient_id]=a[b.patient_id]??[],a[b.patient_id].push(b)),a),{});return p.forEach(a=>{t[a.id]=[],u[a.id]=[],v[a.id]=[],w[a.id]=[]}),i.forEach(b=>{let f,g,h=q[b.doctor_id];if(!h||!t[h])return;let i=r[b.patient_id];if(!i)return;let j=t[h];if(!j.find(a=>a.id===b.patient_id)){let a,d=s[b.patient_id];j.push({id:b.patient_id,name:i.name,admitted:c(e(b.datetime)??new Date),condition:d?.condition??"General Care",status:d?(a=d.status.toLowerCase()).includes("resolve")?"Stable":a.includes("chronic")?"Recovery":"Monitoring":"Monitoring"})}(f=e(b.datetime))&&f.getTime()>=Date.now()&&u[h].length<3&&u[h].push({patientName:i.name,type:b.status,date:d(e(b.datetime)??new Date),room:(g=a.find(a=>a.clinic_id===h))?`${g.clinic_name} Wing`:"Care Suite"})}),p.forEach(a=>{let b=k.filter(b=>b.followup_required&&t[a.id].some(a=>a.id===b.patient_id));v[a.id]=b.slice(0,3).map(a=>({patientName:r[a.patient_id]?.name??`Patient ${a.patient_id}`,followUp:a.diagnosis_date?c(new Date(a.diagnosis_date)):"Pending",reason:`${a.condition} • ${a.severity??"Review"}`}));let d=m.filter(b=>b.clinic_id===a.id).slice(0,3);w[a.id]=(d.length?d:m.slice(0,3)).map((a,b)=>({patientName:a.submitted_by,alert:a.issue_description,severity:a.issue_description.toLowerCase().includes("emergency")?"critical":0===b?"warning":"info",time:`${15*(b+1)} min ago`}))}),Object.entries(y).forEach(([a,b])=>{let c=b.sort((a,b)=>(e(b.recorded_on)?.getTime()??0)-(e(a.recorded_on)?.getTime()??0))[0];if(!c)return;let d=[];c.blood_pressure&&d.push({metric:"Blood Pressure",value:c.blood_pressure,status:"Normal"}),"number"==typeof c.heart_rate&&d.push({metric:"Heart Rate",value:`${c.heart_rate} bpm`,status:h("Heart Rate",c.heart_rate)}),"number"==typeof c.temperature&&d.push({metric:"Temperature",value:`${c.temperature.toFixed(1)}\xb0C`,status:h("Temperature",c.temperature)}),"number"==typeof c.respiratory_rate&&d.push({metric:"Respiratory Rate",value:`${c.respiratory_rate} rpm`,status:"Normal"}),x[Number(a)]=d.length?d:[{metric:"No vitals available",value:"Awaiting data",status:"Review"}]}),{departments:p,patientsByDepartment:t,appointmentsByDepartment:u,followUpsByDepartment:v,alertsByDepartment:w,metricsByPatient:x}}let j=a=>{if(!a)return null;let[b,c]=a.split("/").map(a=>Number(a));return Number.isNaN(b)||Number.isNaN(c)?null:{systolic:b,diastolic:c}};async function k(a=1){let[f,g,h,i,l,m]=await Promise.all([b("doctors_registration"),b("appointments"),b("patients_registration"),b("vitals_history"),b("prescription"),b("doctor_tasks")]),n=f.find(b=>b.doctor_id===a),o=g.filter(b=>b.doctor_id===a),p=h.reduce((a,b)=>(a[b.patient_id]=b,a),{}),q=[],r=new Set;o.forEach(a=>{if(r.has(a.patient_id))return;r.add(a.patient_id);let b=p[a.patient_id];if(!b)return;let d=o.filter(b=>b.patient_id===a.patient_id).map(a=>e(a.datetime)?.getTime()??0).sort((a,b)=>b-a)[0]??Date.now();q.push({id:b.patient_id,name:b.name,age:(a=>{if(!a)return 0;let b=new Date(a);return Number.isNaN(b.getTime())?0:Math.max(0,Math.floor((Date.now()-b.getTime())/315576e5))})(b.dob),lastVisit:c(new Date(d))})});let s=o.reduce((a,b)=>{let d=i.filter(a=>a.patient_id===b.patient_id&&a.blood_pressure).sort((a,b)=>(e(a.recorded_on)?.getTime()??0)-(e(b.recorded_on)?.getTime()??0)).slice(-7).map(a=>{let b=j(a.blood_pressure);return{date:c(e(a.recorded_on)??new Date),systolic:b?.systolic??0,diastolic:b?.diastolic??0,heartRate:a.heart_rate??0}});return d.length&&(a[b.patient_id]=d),a},{}),t=l.filter(b=>b.doctor_id===a&&b.status?.toLowerCase()==="active").map(a=>({drug:a.medicine_name,dose:a.dosage??"As directed",frequency:a.dosage??"Per instructions",since:a.start_date?c(new Date(a.start_date)):"Ongoing"})),u=l.filter(b=>b.doctor_id===a&&b.status?.toLowerCase()!=="active").map(a=>({drug:a.medicine_name,dose:a.dosage??"As directed",frequency:a.dosage??"Per instructions",since:a.end_date?c(new Date(a.end_date)):"Completed"})),v=o.filter(a=>{let b=e(a.datetime);return!!b&&b.getTime()>=Date.now()&&a.status?.toLowerCase()==="scheduled"}).slice(0,3).map(a=>({patientName:p[a.patient_id]?.name??`Patient ${a.patient_id}`,date:d(e(a.datetime)??new Date),type:a.status})),w=m.filter(b=>b.doctor_id===a).slice(0,2).map(a=>({message:a.description,tone:"in progress"===a.status.toLowerCase()?"warning":"info"}));return{doctorName:n?.name??`Doctor ${a}`,patients:q.slice(0,3),vitalsByPatient:s,currentPrescriptions:t,previousPrescriptions:u,upcomingAppointments:v,alerts:w.length?w:[{message:"No outstanding physician tasks",tone:"info"},{message:"All lab reviews completed",tone:"warning"}]}}async function l(a=1){let[f,g,h,i,k,m,n,o,p]=await Promise.all([b("patients_registration"),b("appointments"),b("doctors_registration"),b("clinic_servicehistory"),b("vitals_history"),b("bloodtests"),b("prescription"),b("lab_tests"),b("patient_message_hub")]),q=f.find(b=>b.patient_id===a),r=h.reduce((a,b)=>(a[b.doctor_id]=b,a),{}),s=i.reduce((a,b)=>(a[b.clinic_id]=b,a),{}),t=g.filter(b=>b.patient_id===a&&b.datetime).slice(0,3).map(a=>{let b=r[a.doctor_id],c=s[b?.clinic_id??0]?.clinic_name??"Virtual Visit";return{doctor:b?.name??`Doctor ${a.doctor_id}`,date:d(e(a.datetime)??new Date),location:c}}),u=k.filter(b=>b.patient_id===a).sort((a,b)=>(e(a.recorded_on)?.getTime()??0)-(e(b.recorded_on)?.getTime()??0)).slice(-7),v=m.filter(b=>b.patient_id===a&&b.test_name.toLowerCase().includes("glucose")).sort((a,b)=>new Date(a.test_date).getTime()-new Date(b.test_date).getTime()).slice(-7),w=u.length>0?u.map((a,b)=>{let d=j(a.blood_pressure),f=v[b]?.result_value;return{date:c(e(a.recorded_on)??new Date),bloodPressure:d?.systolic??0,heartRate:a.heart_rate??0,glucose:f?Number(f):0}}):[{date:"Mon",bloodPressure:120,heartRate:72,glucose:95},{date:"Tue",bloodPressure:118,heartRate:70,glucose:96},{date:"Wed",bloodPressure:122,heartRate:74,glucose:98},{date:"Thu",bloodPressure:119,heartRate:71,glucose:97},{date:"Fri",bloodPressure:121,heartRate:73,glucose:99},{date:"Sat",bloodPressure:117,heartRate:69,glucose:94},{date:"Sun",bloodPressure:120,heartRate:72,glucose:95}],x=n.filter(b=>b.patient_id===a&&b.status?.toLowerCase()==="active").map(a=>({name:a.medicine_name,dosage:a.dosage??"Per instructions"})),y=o.filter(b=>b.patient_id===a).slice(0,3).map(a=>({type:a.test_type,description:`${a.test_type} • ${a.result}`,date:c(new Date(a.test_date)),status:a.status,statusTone:"completed"===a.status.toLowerCase()?"success":"warning"})),z=p.filter(b=>b.patient_id===a).slice(0,2).map(a=>({title:a.summary,createdDate:d(new Date(a.last_updated))}));return{patientName:q?.name??`Patient ${a}`,appointments:t,healthMetrics:w,medications:x.length?x:[{name:"Medication list empty",dosage:"Awaiting prescriptions"}],medicalRecords:y,tasks:z.length?z:[{title:"No pending tasks",createdDate:d(new Date)}]}}a.s(["getAnalystDashboardData",()=>g,"getClinicalStaffDashboardData",()=>i,"getDoctorDashboardData",()=>k,"getPatientDashboardData",()=>l])},8778,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/app/doctor.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/doctor.tsx <module evaluation>","default");a.s(["default",0,b])},80514,a=>{"use strict";let b=(0,a.i(11857).registerClientReference)(function(){throw Error("Attempted to call the default export of [project]/app/doctor.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"[project]/app/doctor.tsx","default");a.s(["default",0,b])},70445,a=>{"use strict";a.i(8778);var b=a.i(80514);a.n(b)},82446,a=>{"use strict";var b=a.i(7997),c=a.i(70445),d=a.i(50121);async function e(){let a=await (0,d.getDoctorDashboardData)();return(0,b.jsx)(c.default,{...a})}a.s(["default",()=>e,"dynamic",0,"force-dynamic"])}];

//# sourceMappingURL=_aa646a2d._.js.map